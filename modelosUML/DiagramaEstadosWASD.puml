@startuml
skinparam state {
  BackgroundColor LightBlue
  BorderColor DarkBlue
  FontSize 14
}

title Estado de Navegación WASD en Hoja de Cálculo

state "Celda Activa [filaActual, columnaActual]" as CeldaActiva

state "Procesar Comando" as ProcesarComando
state "Mover Arriba" as MoverArriba : filaActual--
state "Mover Abajo" as MoverAbajo : filaActual++
state "Mover Izquierda" as MoverIzquierda : columnaActual--
state "Mover Derecha" as MoverDerecha : columnaActual++
state "Salir" as Salir

[*] --> CeldaActiva
CeldaActiva --> ProcesarComando : Mostrar hoja\ny esperar comando

ProcesarComando --> MoverArriba : comando = 'w'\n[filaActual > 0]
ProcesarComando --> MoverAbajo : comando = 's'\n[filaActual < TOTAL_FILAS - 1]
ProcesarComando --> MoverIzquierda : comando = 'a'\n[columnaActual > 0]
ProcesarComando --> MoverDerecha : comando = 'd'\n[columnaActual < TOTAL_COLUMNAS - 1]
ProcesarComando --> Salir : comando = 'q'

MoverArriba --> CeldaActiva
MoverAbajo --> CeldaActiva
MoverIzquierda --> CeldaActiva
MoverDerecha --> CeldaActiva

Salir --> [*] : Finalizar programa

note right of ProcesarComando
  Las teclas WASD controlan el movimiento:
    W = Arriba (si filaActual > 0)
    A = Izquierda (si columnaActual > 0)
    S = Abajo (si filaActual < TOTAL_FILAS - 1)
    D = Derecha (si columnaActual < TOTAL_COLUMNAS - 1)
end note
@enduml